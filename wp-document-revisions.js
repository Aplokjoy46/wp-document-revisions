jQuery(document).ready(function(b){function c(a){window.webkitNotifications.checkPermission()>0?window.webkitNotifications.RequestPermission(c):window.webkitNotifications.createNotification("icon.png",wp_document_revisions.lostLockNoticeTitle,a).show()}b(".revision").click(function(a){a.preventDefault();if(confirm(wp_document_revisions.restoreConfirmation))window.location.href=jQuery(this).attr("href")});b("#override_link").click(function(){jQuery.post(ajaxurl,{action:"override_lock",post_id:jQuery("#post_ID").val()||
0},function(a){a?(b("#lock_override").hide(),b(".error").not("#lock-notice").hide(),b("#publish, #add_media, #lock-notice").fadeIn(),autosave()):alert(wp_document_revisions.lockError)})});b("#document a").click(function(){window.webkitNotifications&&window.webkitNotifications.requestPermission()});adminpage&&adminpage=="post-php"&&typenow&&typenow=="document"&&(hasUpload=!1,jQuery(":button, :submit","#submitpost").prop("disabled",!0),wp_document_revisions_autosave_enable_buttons=autosave_enable_buttons,
autosave_enable_buttons=function(){b(document).trigger("autosaveComplete");hasUpload&&wp_document_revisions_autosave_enable_buttons()});b(document).bind("autosaveComplete",function(){if(b("#autosave-alert").length>0&&b("#lock-notice").length>0&&b("#lock-notice").is(":visible"))wp_document_revisions.lostLockNotice=wp_document_revisions.lostLockNotice.replace("%s",b("#title").val()),window.webkitNotifications?c(wp_document_revisions.lostLockNotice):alert(convertEntities(wp_document_revisions.lostLockNotice)),
location.reload(!0)});b("#misc-publishing-actions a").click(function(){b(":button, :submit","#submitpost").removeAttr("disabled")});b(document).bind("documentUpload",function(){var a=window.dialogArguments||opener||parent||top;if(!a.hasUpload)a.jQuery("#content").val(attachmentID),a.jQuery("#message").hide(),a.jQuery("#revision-summary").show(),a.jQuery(":button, :submit","#submitpost").removeAttr("disabled"),a.hasUpload=!0,a.tb_remove(),a.jQuery("#post").before(convertEntities(wp_document_revisions.postUploadNotice)).prev().fadeIn().fadeOut().fadeIn(),
a.jQuery("#sample-permalink").length==0?a.autosave_update_slug(post_id):a.jQuery("#sample-permalink").html(a.jQuery("#sample-permalink").html().replace(/\<\/span>(\.[a-z0-9]{3,4})?$/i,wp_document_revisions.extension))});setTimeout("updateTimestamps",3E3)});
function human_time_diff(b,c){d=new Date;c=c||d.getTime()/1E3+parseInt(wp_document_revisions.offset);diff=Math.abs(c-b);if(diff<=3600)return mins=Math.floor(diff/60),mins<=1&&(mins=1),mins==1?wp_document_revisions.minute.replace("%d",mins):wp_document_revisions.minutes.replace("%d",mins);else if(diff<=86400&&diff>3600)return hours=Math.floor(diff/3600),hours<=1&&(hours=1),hours==1?wp_document_revisions.hour.replace("%d",hours):wp_document_revisions.hours.replace("%d",hours);else if(diff>=86400)return days=
Math.floor(diff/86400),days<=1&&(days=1),days==1?wp_document_revisions.day.replace("%d",days):wp_document_revisions.days.replace("%d",days)}function updateTimestamps(){jQuery(".timestamp").each(function(){jQuery(this).text(human_time_diff(jQuery(this).attr("id")))})};